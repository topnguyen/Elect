function handleLogin(){var r=[],e=window.swaggerUi.api.authSchemes||window.swaggerUi.api.securityDefinitions,u,f,n,i,t;if(e){f=e;for(u in f)if(n=f[u],n.type==="oauth2"&&n.scopes)if(oauth2KeyName=u,Array.isArray(n.scopes))for(t=0;t<n.scopes.length;t++)r.push(n.scopes[t]);else for(i in n.scopes)r.push({scope:i,description:n.scopes[i]})}for(window.swaggerUi.api&&window.swaggerUi.api.info&&(appName=window.swaggerUi.api.info.title),popupDialog=$(['<div class="modal api-popup-dialog in" id="credentials-modal" tabindex="-1" role="dialog" aria-labelledby="credentials-modal-label" aria-hidden="false" style="display: block;">','<div class="modal-dialog">','<div class="modal-content">','<div class="modal-header">','<button type="button" class="close api-popup-cancel" data-dismiss="modal"><span aria-hidden="true">Ã—<\/span><span class="sr-only">Close<\/span><\/button>','<h3 class="modal-title" id="credentials-modal-label">Select OAuth2.0 Scopes<\/h3>',"<\/div>",'<div class="modal-body">',"<p>Scopes are used to grant an application different levels of access to data on behalf of the end user. Each API may declare one or more scopes.",'<a href="#">Learn how to use<\/a>',"<\/p>","<p><strong>"+appName+"<\/strong> API requires the following scopes. Select which ones you want to grant to Swagger UI.<\/p>","<form>",'<div class="api-popup-scopes">','<div class="scopes">',"<\/div>","<\/div>","<form>",'<p class="error-msg"><\/p>',"<\/div>",'<div class="modal-footer">','<div class="api-popup-actions"><button class="api-popup-cancel btn btn-default" type="button">Cancel<\/button><button class="api-popup-authbtn btn btn-primary" type="button">Authorize<\/button><\/div>',"<\/div>","<\/div>","<\/div>","<\/div>"].join("")),$(document.body).append(popupDialog),popup=popupDialog.find(".scopes").empty(),t=0;t<r.length;t++)i=r[t],str='<span data-toggle-scope="'+i.scope+'" class="scope">'+i.scope+"<\/span>",popup.append(str);popupDialog.find("scopes").click(function(){popupMask.hide();popupDialog.hide();popupDialog.empty();popupDialog=[]});popupDialog.find("[data-toggle-scope]").click(function(){$(this).hasClass("active")?$(this).removeClass("active"):$(this).addClass("active")});popupDialog.find("button.api-popup-cancel").click(function(){popupMask.hide();popupDialog.hide();popupDialog.empty();popupDialog=[]});$("button.api-popup-authbtn").unbind();popupDialog.find("button.api-popup-authbtn").click(function(){var u,e,f,n,l,o,i,s,a;popupMask.hide();popupDialog.hide();var r=window.swaggerUi.api.authSchemes,h=window.location,v=location.pathname.substring(0,location.pathname.lastIndexOf("/")),y=h.protocol+"//"+h.host+v+"/SwaggerTemplate/lib/o2c.html",c=window.oAuthRedirectUrl||y,t=null;for(u in r)if(r.hasOwnProperty(u))if(e=r[u].flow,r[u].type==="oauth2"&&e&&(e==="implicit"||e==="accessCode"))n=r[u],t=n.authorizationUrl+"?response_type="+(e==="implicit"?"token":"code"),window.swaggerUi.tokenName=n.tokenName||"access_token",window.swaggerUi.tokenUrl=e==="accessCode"?n.tokenUrl:null;else if(r[u].grantTypes){i=r[u].grantTypes;for(f in i)i.hasOwnProperty(f)&&f==="implicit"?(n=i[f],l=n.loginEndpoint.url,t=n.loginEndpoint.url+"?response_type=token",window.swaggerUi.tokenName=n.tokenName):i.hasOwnProperty(f)&&f==="accessCode"&&(n=i[f],l=n.tokenRequestEndpoint.url,t=n.tokenRequestEndpoint.url+"?response_type=code",window.swaggerUi.tokenName=n.tokenName)}for(o=[],i=$(".scopes").find(".active"),k=0;k<i.length;k++)s=$(i[k]).attr("data-toggle-scope"),o.indexOf(s)===-1&&o.push(s);a=Math.random();window.enabledScopes=o;redirect_uri=c;t+="&redirect_uri="+encodeURIComponent(c);t+="&realm="+encodeURIComponent(realm);t+="&client_id="+encodeURIComponent(clientId);t+="&scope="+encodeURIComponent(o.join(" "));t+="&state="+encodeURIComponent(a);window.open(t)});popupMask.show();popupDialog.show()}function handleLogout(){for(key in window.authorizations.authz)window.authorizations.remove(key);window.enabledScopes=null;var n=$(".api-ic");n.addClass("btn-default");n.removeClass("btn-success");n.removeClass("btn-warning");n.text("oauth");$("#input_apiKey").val("")}function initOAuth(n){var t=n||{},i=[],r;if(appName=t.appName||i.push("missing appName"),popupMask=t.popupMask||$("#api-common-mask"),popupDialog=t.popupDialog||$(".api-popup-dialog"),clientId=t.clientId||i.push("missing client id"),realm=t.realm||i.push("missing realm"),i.length>0){log("auth unable initialize oauth: "+i);return}$("pre code").each(function(n,t){hljs.highlightBlock(t)});r=$(".api-ic");r.unbind();r.click(function(n){$(n.target).hasClass("btn-default")?handleLogin():handleLogout()})}var appName,popupMask,popupDialog,clientId,realm,oauth2KeyName,redirect_uri;window.processOAuthCode=function(n){var t={client_id:clientId,code:n.code,grant_type:"authorization_code",redirect_uri:redirect_uri};$.ajax({url:window.swaggerUi.tokenUrl,type:"POST",data:t,success:function(n){onOAuthComplete(n)},error:function(){onOAuthComplete("")}})};window.onOAuthComplete=function(n){var r,i,t;n&&(n.error?(r=$("input[type=checkbox],.secured"),r.each(function(n){r[n].checked=!1}),alert(n.error)):(i=n[window.swaggerUi.tokenName],i&&(t=null,$.each($(".auth #api_information_panel"),function(n,i){var f=i,r,e,u,o;if(f&&f.childNodes){for(r=[],$.each(f.childNodes,function(n,t){var i=t.innerHTML;i&&r.push(i)}),e=[],u=0;u<r.length;u++)o=r[u],window.enabledScopes&&window.enabledScopes.indexOf(o)==-1&&e.push(o);e.length>0?(t=i.parentNode,$(t).find(".api-ic").addClass("btn-warning"),$(t).find(".api-ic").removeClass("btn-default"),$(t).find(".api-ic").removeClass("btn-success")):(t=i.parentNode,$(t).find(".api-ic").addClass("btn-success"),$(t).find(".api-ic").removeClass("btn-default"),$(t).find(".api-ic").removeClass("btn-warning"))}}),$(".api-ic").text("signout"),$("#input_apiKey").val(i),window.swaggerUi.api.clientAuthorizations.add(oauth2KeyName,new SwaggerClient.ApiKeyAuthorization("Authorization","Bearer "+i,"header")))))};